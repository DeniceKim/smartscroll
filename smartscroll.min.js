!function(e){var t,n="mousewheel DOMMouseScroll wheel MozMousePixelScroll";"undefined"!=typeof Lethargy&&null!==Lethargy&&(t=new Lethargy);var i=function(){return Math.max(window.pageYOffset,window.document.body.scrollTop,window.document.documentElement.scrollTop)};e.smartscroll=function(o){var r=e.extend({},e.smartscroll.defaults,o);r.sectionSelector||(r.sectionSelector="."+r.sectionClass),("undefined"==typeof EventEmitter||null===EventEmitter||r.eventEmitter&&r.eventEmitter.constructor!==EventEmitter)&&(r.eventEmitter=null);var a,l,s=!1,c=[],d=!1,h=!1,u=window.location.hash,p=e(r.sectionWrapperSelector+":first"),w=function(t,n){s=!0,r.eventEmitter&&ee.emitEvent("scrollStart",[t,n]),e("body,html").stop(!0,!0).animate({scrollTop:t},n,function(){s=!1,r.eventEmitter&&ee.emitEvent("scrollEnd",[t,n])})},f=function(){var t=[];a=Math.round(p.position().top+parseInt(p.css("paddingTop"),10)+parseInt(p.css("borderTopWidth"),10)+parseInt(p.css("marginTop"),10)),l=Math.round(a+p.height(),10),t.push(a),e(r.sectionSelector).each(function(n,i){t.push(Math.round(a+e(i).position().top+e(i).outerHeight()))}),c=t},v=function(e){if(t)var n=t.check(e);if(!s)if(t){if(1===n)return"up";if(-1===n)return"down"}else{if(e.originalEvent.wheelDelta>0||e.originalEvent.detail<0)return"up";if(e.originalEvent.wheelDelta<0||e.originalEvent.detail>0)return"down"}return!1},m=function(e){for(var t=0;t<c.length;t++)if(e<=c[t])return t;return c.length},g=function(){e(window).bind(n,function(t){var n=v(t);r.dynamicHeight&&f();var o=i(),s=o+e(window).height();if(s>a&&l>=o){var d=m(o),h=m(o+e(window).height()/2),u=m(s);d!==u&&(t.preventDefault(),t.stopPropagation(),n&&("up"===n?w(c[h-1]-e(window).height(),r.animationSpeed):"down"===n&&w(c[h]+1,r.animationSpeed)))}})},E=function(){e(window).unbind(n)},S=function(){var t;if(i()+e(window).height()/2<a)t=r.headerHash;else{var n=m(i()+e(window).height()/2);void 0!==n&&(t=e(r.sectionSelector+":nth-of-type("+(n+1)+")").data("hash"))}("undefined"==typeof t||window.location.hash!=="#"+t)&&("undefined"==typeof t&&(t=r.headerHash),r.keepHistory?window.location.hash=t:window.location.replace(window.location.href.split("#")[0]+"#"+t))};if(p.css({position:"relative"}),setTimeout(function(){if(f(),r.autoHash&&(null===r.eventEmitter||r.hashContinuousUpdate?e(window).bind("scroll",S):ee.addListener("scrollEnd",S)),r.initialScroll&&u.length>0){var t=e('[data-hash="'+u.substr(1)+'"]');t.length>0&&w(t[0].offsetTop+a,0)}},50),e(window).bind("resize",f),null!==r.breakpoint&&r.breakpoint===parseInt(r.breakpoint,10)&&r.breakpoint>0&&(d=!0),"vp"==r.mode)if(r.ie8){var b=function(){e(r.sectionSelector).css({height:e(window).height()})};b(),e(window).bind("resize",b)}else e(r.sectionSelector).css({height:"100vh"});r.sectionScroll&&(d&&e(window).bind("resize",function(t){if(e(window).width()<r.breakpoint){if(!h)return E(),h=!0,!1}else h&&(g(),h=!1)}),g())},e.smartscroll.defaults={animationSpeed:700,autoHash:!0,breakpoint:null,initialScroll:!0,headerHash:"header",keepHistory:!1,mode:"vp",sectionClass:"section",sectionSelector:null,sectionScroll:!0,sectionWrapperSelector:".section-wrapper",eventEmitter:null,dynamicHeight:!1,ie8:!1,hashContinuousUpdate:!0}}(jQuery);