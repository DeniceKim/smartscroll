!function(e){var t,n="mousewheel DOMMouseScroll wheel MozMousePixelScroll";"undefined"!=typeof Lethargy&&null!==Lethargy&&(t=new Lethargy);var i=function(){return Math.max(window.pageYOffset,window.document.body.scrollTop,window.document.documentElement.scrollTop)};e.smartscroll=function(o){var r=e.extend({},e.smartscroll.defaults,o);if(r.sectionSelector||(r.sectionSelector="."+r.sectionClass),("undefined"==typeof EventEmitter||null===EventEmitter||r.eventEmitter&&r.eventEmitter.constructor!==EventEmitter)&&(r.eventEmitter=null),r.bindSwipe)var l=null,a=null,s=function(e){var e=e.originalEvent||e;l=e.touches[0].clientX,a=e.touches[0].clientY},c=function(e){var e=e.originalEvent||e;if(l&&a){var t=e.touches[0].clientX,n=e.touches[0].clientY,i=l-t,o=a-n;Math.abs(i)>Math.abs(o)?i>0?r.eventEmitter.emitEvent("swipeLeft"):r.eventEmitter.emitEvent("swipeRight"):o>0?r.eventEmitter.emitEvent("swipeUp"):r.eventEmitter.emitEvent("swipeDown"),l=null,a=null}};var d,h,u=!1,p=[],w=!1,v=!1,f=window.location.hash,m=e(r.sectionWrapperSelector+":first"),E=function(t,n){u=!0,e("body,html").stop(!0,!0).animate({scrollTop:t},n,function(){u=!1,r.eventEmitter&&r.eventEmitter.emitEvent("scrollEnd")})};this.scroll=function(t){if(p){var n=i();if(r.eventEmitter){var o=b(n+e(window).height()/2),l=t?o+1:o-1;r.eventEmitter.emitEvent("scrollStart",[l])}for(var a=0;a<p.length;a++)if(n<p[a])return t?E(p[a],700):E(p[a-1]-e(window).height(),700),r.eventEmitter&&r.eventEmitter.emitEvent("scrollEnd"),!1}};var g=function(){var t=[];d=Math.round(m.position().top+parseInt(m.css("paddingTop"),10)+parseInt(m.css("borderTopWidth"),10)+parseInt(m.css("marginTop"),10)),h=Math.round(d+m.height(),10),t.push(d),e(r.sectionSelector).each(function(n,i){t.push(Math.round(d+e(i).position().top+e(i).outerHeight()))}),p=t},S=function(e){if(t)var n=t.check(e);if(!u)if(t){if(1===n)return"up";if(-1===n)return"down"}else{if(e.originalEvent.wheelDelta>0||e.originalEvent.detail<0)return"up";if(e.originalEvent.wheelDelta<0||e.originalEvent.detail>0)return"down"}return!1},b=function(e){for(var t=0;t<p.length;t++)if(e<=p[t])return t;return p.length},y=function(){e(window).bind(n,function(t){var n=S(t);r.dynamicHeight&&g();var o=i(),l=o+e(window).height();if(l>d&&h>=o){var a=b(o),s=b(o+e(window).height()/2),c=b(l);a===c&&r.innerSectionScroll||(t.preventDefault(),t.stopPropagation(),n&&("up"===n?(r.toptotop?E(p[s-2]+1,r.animationSpeed):E(p[s-1]-e(window).height(),r.animationSpeed),r.eventEmitter&&r.eventEmitter.emitEvent("scrollStart",[s-1])):"down"===n&&(E(p[s]+1,r.animationSpeed),r.eventEmitter&&r.eventEmitter.emitEvent("scrollStart",[s+1]))))}})},H=function(){e(window).unbind(n)},M=function(){var t;if(i()+e(window).height()/2<d)t=r.headerHash;else{var n=b(i()+e(window).height()/2);void 0!==n&&(t=e(r.sectionSelector+":nth-of-type("+(n+1)+")").data("hash"))}("undefined"==typeof t||window.location.hash!=="#"+t)&&("undefined"==typeof t&&(t=r.headerHash),r.keepHistory?window.location.hash=t:window.location.replace(window.location.href.split("#")[0]+"#"+t))};if(m.css({position:"relative"}),setTimeout(function(){if(g(),r.autoHash&&(null===r.eventEmitter||r.hashContinuousUpdate?e(window).bind("scroll",M):r.eventEmitter.addListener("scrollEnd",M)),r.initialScroll&&f.length>0){var t=e('[data-hash="'+f.substr(1)+'"]');t.length>0&&E(t[0].offsetTop+d,0)}},50),e(window).bind("resize",g),null!==r.breakpoint&&r.breakpoint===parseInt(r.breakpoint,10)&&r.breakpoint>0&&(w=!0),"vp"==r.mode)if(r.ie8){var k=function(){e(r.sectionSelector).css({height:e(window).height()})};k(),e(window).bind("resize",k)}else e(r.sectionSelector).css({height:"100vh"});return r.sectionScroll&&(w&&e(window).bind("resize",function(t){if(e(window).width()<r.breakpoint){if(!v)return H(),v=!0,!1}else v&&(y(),v=!1)}),y()),r.bindSwipe&&(e(window).on("touchstart",s),e(window).on("touchmove",c)),this},e.smartscroll.defaults={animationSpeed:700,autoHash:!0,breakpoint:null,initialScroll:!0,headerHash:"header",keepHistory:!1,mode:"vp",sectionClass:"section",sectionSelector:null,sectionScroll:!0,sectionWrapperSelector:".section-wrapper",eventEmitter:null,dynamicHeight:!1,ie8:!1,hashContinuousUpdate:!0,innerSectionScroll:!0,toptotop:!1,bindSwipe:!0}}(jQuery);